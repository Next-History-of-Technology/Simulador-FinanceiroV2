<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Financeiro - Vazamento de Amônia</title>
</head>
<body>

    <h1>Simulador Financeiro</h1>
    <p>Calcule o prejuízo potencial em caso de paralisação por vazamento de amônia.</p>
    
    <div>
        <label> 
        <span><b>1. Informe o faturamento diário:</span><br>
        <input type="text" id="input_faturamento" placeholder="ex: 15000"><br><br>
        </label>
    </div>


    <div>
        <label>
        <b>2. Houve paralisação?<br>
        <select id="select_paralisacao">
            <option value="#">Escolha uma opção</option>
            <option>Não</option>
            <option>Sim</option>
        </select><br><br>
        </label>
    </div>

    <div>
        <label>
        <span><b>3. Quantos dias durou a paralisação?</span><br>
        <input type="text" id="input_periodo" placeholder="ex: 2"><br><br>
        </label>
    </div>

    <div>
        <label>
        <span> <b>4. Quantidade de funcionários:</span><br>
        <input type="text" id="input_funcionarios" placeholder="ex: 50"><br><br>
        </label>
    </div>

    <div>
        <button onclick="calcular()">CALCULAR</button>
    </div>

    <hr>

    <div id="msg"></div>

</body>
</html>

<script>
    function calcular() {
        var faturamento = Number(input_faturamento.value);
        var houveParalisacao = select_paralisacao.value;
        var dias = Number(input_periodo.value);
        var funcionarios = Number(input_funcionarios.value);


        // validação caso seja inserido dados invalidos
        if (faturamento <= 0 || isNaN(faturamento)) {
            alert("Informe um faturamento válido");
            
        }
        if (houveParalisacao == "Sim" && (dias <= 0 || isNaN(dias))) {
            alert("Informe um período de paralisação válido");
            
        }
        if (funcionarios <= 0 || isNaN(funcionarios)) {
            alert("Informe uma quantidade de funcionários válida");
            
        }

        // Cálculos principais
        var perda = faturamento * dias;  // impacto
        var multaMin = 5659; // pego do protótipo
        var MultaMedia = 25000; // tirei a média 
        var multaMax = 50000; // pego do protótipo
        var multaMinimaBase = 443.97; // calculo de perda variavel
        var multaReincidencia = 44396.84; // peguei do protótipo
        var multaFuncionario = 104.31; // pego do protótipo 
        var perdaFunc = funcionarios * multaFuncionario; // calculo de perda variavel

        // conta dos impactos
        var faturamentoMensal = faturamento * 30; //  30 dias de trabalho
        var impactoMultaMin = (multaMin / faturamentoMensal * 100).toFixed(1); // impacto da multa minima no faturamento
        var impactoMultaMax = (multaMax / faturamentoMensal * 100).toFixed(1); // impacto da multa maxima no faturamento
        var impactoMultaMedia = (MultaMedia / faturamentoMensal * 100).toFixed(1); // impacto da Multa Media no faturamento
        var impactoReincidencia = (multaReincidencia / faturamentoMensal * 100).toFixed(1); // impacto da multa por reicidencia pego no protótipo 
        

        var msgHTML = `
            <h3>Relatório de Prejuízo Estimado</h3>
            <p><b>Possível Multa por descumprimento da lei: <br>
            mínimo R$ ${multaMin.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} <br>
            máximo R$ ${multaMax.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}

            <p>(Multa mínima aplicável: R$ ${multaMinimaBase.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})
            <p>(Multa por reincidência: até R$ ${multaReincidencia.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})
            <p>(Multa por funcionário envolvido: R$ ${multaFuncionario.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})
            
            

            <hr>
            <h4>Impacto no faturamento mensal estimado (R$ ${faturamentoMensal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})</h4>
            <p>- Perda direta de faturamento: R$ ${perda.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}
            <p>- Multa mínima: ${impactoMultaMedia}% do faturamento
            <p>- Multa por reincidência: ${impactoReincidencia}% do faturamento
            <p>- Multa por Funcionario: ${perdaFunc.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} do faturamento

        `;

        msg.innerHTML = msgHTML;
    }
</script>
